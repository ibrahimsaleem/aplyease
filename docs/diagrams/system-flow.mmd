graph LR
  %% Clusters
  subgraph Client
    U["User Browser"]
    R["React App<br/>(Vite + TanStack Query)"]
  end

  subgraph "Server (Express)"
    E["Express App"]
    S[("Session<br/>(express-session)")]

    subgraph "API Routes"
      A[/"Auth<br/>(/api/auth/*)"/]
      US[/"Users<br/>(/api/users)"/]
      AP[/"Applications<br/>(/api/applications)"/]
      ST[/"Stats<br/>(/api/stats/*)"/]
      CL[/"Clients<br/>(/api/clients)"/]
      EX[/"Export CSV<br/>(/api/applications/export)"/]
    end

    T["Storage<br/>(Drizzle)"]
  end

  subgraph Database
    PG[("Neon Postgres")]
  end

  %% Flows
  U --> R
  R -->|"fetch /api/* (credentials: include)"| E
  E --> S
  E --> A
  E --> US
  E --> AP
  E --> ST
  E --> CL
  E --> EX
  A --> T
  US --> T
  AP --> T
  ST --> T
  CL --> T
  EX --> T
  T <--> PG
  E -->|"JSON responses"| R
